# EFS

- Elastic File System
- 많은 EC2 인스턴스에 탑재될 수 있는 NFS (Network File System)
- `다양한 AZ에서 사용이 가능하다.`
    - EBS는 하나의 AZ에만 잠겨있다. (차이점)
    - 서로 다른 AZ에 있는 EC2 인스턴스에 동일한 파일 시스템을 마운트
    - 모든 EC2 인스턴스들은 EFS 드라이브 접근시 데이터들을 공유할 수 있다.
- `가용성이 높지만 비싸다.`
    - gp2 가격의 3배
- 하지만 `사용한 만큼만 비용을 지불한다.`
    - 많은 양의 데이터를 저장하지 않는다면, EBS보다 저렴할 수 있다.
    - 용량 계획이 없다.
- 컨텐츠 관리, 웹 서빙, 데이터 공유, 워드프레스에서 사용
- NFSv4.1 프로토콜을 사용
- EFS에 접근하기 위해선 `보안 그룹`을 사용해야한다. (표준)
- `EFS는 오직 AMI에 기반한 리눅스에서만 작동한다.`
    - 윈도우 x
    - POSIX file system (~ Linux)
- EFS를 암호화하기 위해 `KMS` 키를 사용한다.



<br>



## Performance

- 동시간대에 수천명의 NFS 고객들을 지원

- 처리량은 초당 10기가 바이트 이상 지원
- Petabyte 스케일 up 가능
    - 자동으로 관리해주기 때문에 용량 관리를 신경쓸 필요가 없다.
- 2가지 종류의 성능 모드가 존재한다.
    1. 범용 목적
        - 웹서버, 컨텐츠 관리 시스템과 같은 지연 민감할 때 사용
    2. Max I/O
        - 빅데이터
- 처리량 모드
    1. 버스팅
        - 처리량이 파일 시스템 크기와 같이 확장된다.
        - 1 테라 바이트를 저장하면 초당 50 메가바이트를 얻을 수 있으며 최대 100 메가 바이트까지 버스트
    2. 프로비젼
        - 처리량이 저장 사이즈에 관계없도록 설정 가능
        - 1테라바이트의 저장 용량밖에 없을지라도 1초당 최대 1기가바이트의 처리량을 설정할 수 있다.
        - `작은 파일 시스템을 갖고있지만 고성능 처리량`이 필요하다면 EFS의 프로비젼 처리량 모드
- 스토리지 티어
    - 파일의 수명 주기 관리 기능
    - 7, 14, 30(기본), 60, 90일 후에 파일을 새 계층으로 이동
    - Standard : 자주 엑세스 하는 파일
    - EFS-IA : 저비용 티어, 자주 엑세스하지 않는 파일들