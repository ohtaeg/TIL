# 2. 네트워크의 기본 규칙
## 프로토콜
### # 프로토콜이란?
- 전세계적으로 네트워크 상의 컴퓨터끼리 데이터를 주고 받으려면 **통일된 통신 방식**이 필요하다.
- 만약 문서나 그림 등의 이진 데이터를 전기 신호로 변환하여 송신했는데 수신측에서 송신측이 <u>어떤 방법으로 변환했는지 모르면 통신할 수 없습니다.</u>
- 송신측과 수신측의 장비들이 미리 정해놓은 공통된 메뉴얼에 따라 통신을 해야하는데, 이 메뉴얼을 `프로토콜`이라고 한다.
- 예로
1. 한글을 모르는 프랑스인과 불어를 모르는 한국인이 문제 없이 대화하려면 영어로 대화한다는 **규칙**을 정하면 문제없이 대화할 수 있을 것.
2. 다른 사람과의 통화를 예로 하면, 전화기를 들고, 상대방의 전화번호를 입력하고, 상대방이 받을때까지 수화기를 들고, <br>
   상대와 대화가 끝나면 수화기를 내리는 이 일련의 절차, 규칙들로 이루어져 있는데, 네트워크 통신도 여러개의 절차인 여러 프로토콜을 이용하여 통신이 이루어진다.

<br>
 
## OSI 모델
### # OSI 모델이란?
- 예전에는 같은 회사의 컴퓨터끼리만 통신이 가능했던 시절이 있다고 한다. A사와 B사의 컴퓨터와는 통신이 불가
- 모두가 통신할 수 있도록 ISO 라는 국제표준화기구가 있는데 이 단체가 OSI 표준 규격을 정함.
    - 이 OSI 모델은 네트워크 기술의 기본이 되는 모델이 된다.
- 데이터 송수신시 컴퓨터 내부에서 여러가지 일을 하는데, 이 과정을 7개의 계층(Layer)으로 나눠서 한다.
- **각 계층은 독립적이며, 다른 계층의 영향을 받지 않는다.**

|계층|이름|설명|
|------------|------------|------------|
|7|응용 계층 (Application Layer)|이메일 & 파일 전송, 웹 사이트등 어플리케이션에 대한 서비스를 제공|
|6|표현 계층 (Presentation Layer)|문자 코드, 압축, 암호화 등 데이터를 변환한다.|
|5|세션 계층 (Session Layer)|어플리케이션간 연결 유지, 연결 해제 등의 작업을 수행한다.|
|4|전송 계층 (Transport Layer)|상대측 어플리케이션 계층에 있는 어떤 프로토콜에게 전달할지 책임을 지고 전달한다.|
|3|네트워크 계층 (Network Layer)|다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정한다.|
|2|데이터 링크 계층 (Data Link Layer)|네트워크 기기간 데이터 전송 및 물리 주소를 결정한다.|
|1|물리 계층 (Physical Layer)|시스템간 물리적인 연결과 전기신호를 변환 및 제어한다.|
    
- 데이터를 송신하는 쪽은 데이터를 보내기 위해 상위 계층에서 하위 계층으로 데이터를 전달한다.
- 데이터를 수신하는 쪽은 하위 계층에서 상위 계층으로 각 계층을 통해 전달한다.

<br>
 
### # 계층화의 장점
- 높은 계층에서 프로그래밍하는 개발자들은 낮은 계층의 일까지 하나하나 신경쓸 필요 없이 개발할 수 있는게 계층 모델의 이유이다.
- 계층마다 역할 분담을 통해 작업을 독립시켜 개발자는 작업시 신경써야할 범위를 좁힐 수 있고
- 통신이 일어나는 과정을 단계별로 확인할 수 있기 때문에, 특정한 곳에서 이상이 생기면 그곳만 수정하면 되는 장점이 있다.

<br>
 
## TCP / IP  모델
### # TCP / IP 모델이란?
- 데이터를 디지털 신호로 바꾼다 -> 송신측으로 전달한다 -> 디지털 신호를 데이터로 되돌린다. 라는 작업을 효율적으로 수행하기 위해 <br>
- OSI 7계층을 TCP / IP 에서는 4 ~ 5개의 계층으로 절차를 거친다.
    - 4 ~ 5 계층은 큰차이가 없다.

|OSI 모델|TCP/IP 4계층|TCP/IP 5계층|
|------------|------------|------------|
|응용 계층|응용 계층|응용 계층|
|표현 계층|응용 계층|응용 계층|
|세션 계층|응용 계층|응용 계층|
|전송 계층|전송 계층|전송 계층|
|네트워크 계층|네트워크 계층|네트워크 계층|
|데이터 링크 계층|네트워크 접속 계층|데이터 링크 계층|
|물리 계층|네트워크 접속 계층|물리 계층|

<br>

## 캡슐화와 역캡슐화
### # 캡슐화와 역캡슐화란 ?
- 데이터 송신시 데이터의 앞 부분에 전송시 필요한 정보를 붙여 다음 계층으로 보낸다.
    - 이 정보를 `헤더(Header)`라고 한다.
    - 헤더에는 데이터를 전달받을 상대방에 대한 정보도 포함되어 있다.
- 특정 계층에서는 `트레일러(Trailer)`라는 정보를 데이터의 마지막에 추가한다.
    - 트레일러는 없을 수 있다.
- 이처럼 **각 계층마다 헤더와 트레일러를 붙이면서 데이터와 정보를 하나로 묶어서 다루는것을 `캡슐화`라고 한다.**
    - 송신측의 각 계층에서 추가된 Header와 Trailer는 수신측의 동일 계층에서만 사용되며, 캡슐화되어 있어서 다른 계층에서는 볼 수 없다.
- 데이터 수신측에서 헤더와 트레일러를 하나씩 제거하는 과정을 `역캡슐화`라고 한다.

<br>

### # 캡슐화 과정
- 송신측 컴퓨터에서 웹사이트를 접속하려고 하면 다음과 같은 과정을 통해 만들어진다.
1. 응용 계층에서 웹 사이트를 접속하기 위한 요청 데이터가 만들어 진다.
    ```
    응용 계층 |                                 웹 사이트 요청 데이터
    ```
2. 해당 데이터를 전송 계층으로 전달하는데, 전송 계층에서 신뢰할 수 있는 통신이 이뤄지도록 전달 받은 데이터에 헤더를 붙인다.
    ```
    응용 계층 |                                 웹 사이트 요청 데이터
   
   
    전송 계층 |                    전송 계층 헤더 + 웹 사이트 요청 데이터
    ```
3. 전송 계층에서 만들어진 데이터를 다른 네트워크와 통신하기 위해 네트워크 계층에서 헤더를 붙인다.
    ```
    응용 계층    |                              웹 사이트 요청 데이터
   
                
    전송 계층    |                 전송 계층 헤더 + 웹 사이트 요청 데이터
   
      
    네트워크 계층 | 네트워크 계층 헤더 + 전송 계층 헤더 + 웹 사이트 요청 데이터 
    ```
4. 데이터 링크 계층에선 데이터에 물리적인 통신 채널을 연결하기 위해 헤더와 `트레일러`를 붙인다.
    ```
    응용 계층    |                                                 웹 사이트 요청 데이터
   
                
    전송 계층    |                                   전송 계층 헤더 + 웹 사이트 요청 데이터
   
      
    네트워크 계층 |                   네트워크 계층 헤더 + 전송 계층 헤더 + 웹 사이트 요청 데이터 
   
   
    데이터 링크  | 데이터 링크 계층 헤더 + 네트워크 계층 헤더 + 전송 계층 헤더 + 웹 사이트 요청 데이터 + 데이터 링크 트레일러
    ```
5. 데이터 링크에서 만들어진 데이터는 최종적으로 전기 신호로 변환되어 수신측에 도착한다.
6. 수신측에서는 역으로 차례대로 제거해나간다.
